(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{322:function(s,a,t){"use strict";t.r(a);var e=t(7),n=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("MySQL 是最流行的关系型数据库管理系统，在 WEB 应用方面 MySQL 是最好的 RDBMS(Relational Database Management System：关系数据库管理系统)应用软件之一。")]),s._v(" "),a("p",[s._v("本篇记录一下在"),a("code",[s._v("Ubuntu 20.04")]),s._v("系统上配置MySQL的过程。\n")]),s._v(" "),a("h2",{attrs:{id:"_1-查看是否安装过"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-查看是否安装过"}},[s._v("#")]),s._v(" 1.查看是否安装过")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-qa")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" mysql\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 彻底卸载")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" purge mysql-*\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-rf")]),s._v(" /etc/mysql/ /var/lib/mysql\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" autoremove\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" autoclean\n")])])]),a("h2",{attrs:{id:"_2-安装mysql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装mysql"}},[s._v("#")]),s._v(" 2.安装MySQL")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更新软件源并安装")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" update\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" mysql-server\n")])])]),a("h2",{attrs:{id:"_3-配置mysql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-配置mysql"}},[s._v("#")]),s._v(" 3.配置MySQL")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动服务")]),s._v("\nsystemctl start mysqld\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看服务状态")]),s._v("\nsystemctl status mysql\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-tap")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" mysql\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 运行mysql初始化安全脚本")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" mysql_secure_installation\n")])])]),a("p",[s._v("设置"),a("code",[s._v("VALIDATE PASSWORD PLUGIN")]),s._v("插件来测试MySQL用户密码强度并提高安全性的密码，输入y")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("VALIDATE PASSWORD COMPONENT can be used to "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" passwords\nand improve security. It checks the strength of password\nand allows the "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("users")]),s._v(" to "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" only those passwords "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("which")]),s._v(" are\nsecure enough. Would you like to setup VALIDATE PASSWORD component?\n\nPress y"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("Y "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" Yes, any other key "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" No: y\n")])])]),a("p",[s._v("密码验证策略分为三个级别：低，中和强")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("There are three levels of password validation policy:\n\nLOW    Length "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("\nMEDIUM Length "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(", numeric, mixed case, and special characters\nSTRONG Length "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(", numeric, mixed case, special characters and dictionary\n\nPlease enter "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" LOW, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" MEDIUM and "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" STRONG: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),a("p",[s._v("MySQL设置密码时显示... Failed! Error: SET PASSWORD has no significance for user 'root'@'localhost' as the authentication method used doesn't store authentication datatead if you want to change authentication parameters.")]),s._v(" "),a("p",[s._v("解决方案")]),s._v(" "),a("ol",[a("li",[s._v("sudo mysql进入MySQL")]),s._v(" "),a("li",[s._v("ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password by '新密码';")]),s._v(" "),a("li",[s._v("exit退出MySQL，输入：\nsudo mysql_secure_installation")]),s._v(" "),a("li",[s._v("输入刚刚的新密码，出现的所有问题都n即可。")])])]),s._v(" "),a("h2",{attrs:{id:"_4-配置新角色权限"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-配置新角色权限"}},[s._v("#")]),s._v(" 4.配置新角色权限")]),s._v(" "),a("div",{staticClass:"language-mysql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("create user 'administrator'@'%' identified by 'administrator';\ngrant all privileges on *.* to 'administrator'@'%';\n")])])]),a("h2",{attrs:{id:"_5-修改root账户密码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-修改root账户密码"}},[s._v("#")]),s._v(" 5.修改root账户密码")]),s._v(" "),a("p",[s._v("MySQL使用的是validate_password插件（plugin）检测、验证账号密码强度，保障账号的安全性")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("set global validate_password.policy=0; # 密码强度检验等级 0: 只检验长度\nset global validate_password.length=4; # 密码最小长度\nset global validate_password.mixed_case_count=0; # 密码具有大写和小写字符的最小数量\nset global validate_password.check_user_name=false; # 密码可以设置为当前用户名\nflush privileges;\n\nALTER USER 'root'@'localhost' IDENTIFIED BY 'root';\n")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);