(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{321:function(a,s,t){"use strict";t.r(s);var e=t(7),c=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("p",[a._v("如果要分析某条SQL的性能问题，通常我们要先看"),s("code",[a._v("SQL的执行计划")]),a._v("，看看SQL的每一步执行是否存在问题。")]),a._v(" "),s("p",[a._v("如果一条SQL平时执行的好好的，却有一天突然性能很差，如果排除了系统资源和阻塞的原因，那么基本可以断定是执行计划出了问题。\n")]),a._v(" "),s("h2",{attrs:{id:"什么是执行计划"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#什么是执行计划"}},[a._v("#")]),a._v(" 什么是执行计划？")]),a._v(" "),s("p",[a._v("执行计划是一条查询语句在Oracle中的执行过程或访问路径的描述。")]),a._v(" "),s("p",[a._v("执行计划描述了SQL引擎为执行SQL语句进行的操作;\n分析SQL语句相关的性能问题或仅仅质疑查询优化器的决定时，必须知道执行计划；所以执行计划常用于sql调优。")]),a._v(" "),s("h2",{attrs:{id:"访问数据的方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#访问数据的方法"}},[a._v("#")]),a._v(" 访问数据的方法")]),a._v(" "),s("p",[a._v("Oracle访问表中数据的方法有两种，一种是直接表中访问数据，另外一种是先访问索引，如果索引数据不符合目标SQL，就回表，符合就不回表，直接访问索引就可以。")]),a._v(" "),s("h3",{attrs:{id:"全表扫描-table-access-full"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#全表扫描-table-access-full"}},[a._v("#")]),a._v(" 全表扫描(table access full)")]),a._v(" "),s("p",[a._v("全表扫描是Oracle直接访问数据的一种方法，全表扫描时从第一个区(EXTENT)的第一个块(BLOCK)开始扫描，一直扫描的到表的高水位线(High Water Mark)，这个范围内的数据块都会扫描到")]),a._v(" "),s("p",[a._v("全表扫描是采用多数据块一起扫的，并不是一个个数据库扫的，然后我们经常说全表扫描慢是针对数据量很多的情况，数据量少的话，全表扫描并不慢的，不过随着数据量越多，高水位线也就越高，也就是说需要扫描的数据库越多，自然扫描所需要的IO越多，时间也越多")]),a._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[a._v("注意")]),a._v(" "),s("p",[a._v("数据量越多，全表扫描所需要的时间就越多，然后直接删了表数据呢？查询速度会变快？其实并不会的，因为即使我们删了数据，高位水线并不会改变，也就是同样需要扫描那么多数据块")])]),a._v(" "),s("h3",{attrs:{id:"rowid扫描-table-access-by-rowid"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#rowid扫描-table-access-by-rowid"}},[a._v("#")]),a._v(" ROWID扫描(table access by rowid)")]),a._v(" "),s("p",[a._v("ROWID也就是表数据行所在的物理存储地址，所谓的ROWID扫描是通过ROWID所在的数据行记录去定位。")]),a._v(" "),s("p",[a._v("ROWID是一个伪列，数据库里并没有这个列，它是数据库查询过程中获取的一个物理地址，用于表示数据对应的行数。")]),a._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[a._v("注意")]),a._v(" "),s("p",[a._v("使用ROWID扫描时，注意回表次数，如果回表次数太多，建议走全表扫描")])]),a._v(" "),s("h3",{attrs:{id:"访问index扫描-table-access-by-index-scan"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#访问index扫描-table-access-by-index-scan"}},[a._v("#")]),a._v(" 访问index扫描(table access by index scan)")]),a._v(" "),s("p",[a._v("访问索引(TABLE ACCESS BY INDEX SCAN)的情况就比较多了，可以分为:")]),a._v(" "),s("ul",[s("li",[a._v("索引唯一扫描(index unique scan)")]),a._v(" "),s("li",[a._v("索引全扫描(index full scan)")]),a._v(" "),s("li",[a._v("索引范围扫描(index range scan)")]),a._v(" "),s("li",[a._v("索引快速全扫描(index fast full scan)")]),a._v(" "),s("li",[a._v("索引跳跃式扫描(index skip scan)")])]),a._v(" "),s("h2",{attrs:{id:"谓词条件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#谓词条件"}},[a._v("#")]),a._v(" 谓词条件")]),a._v(" "),s("h3",{attrs:{id:"access"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#access"}},[a._v("#")]),a._v(" Access")]),a._v(" "),s("p",[a._v("access将会影响数据的访问路径(表还是索引)")]),a._v(" "),s("h3",{attrs:{id:"filter"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#filter"}},[a._v("#")]),a._v(" Filter")]),a._v(" "),s("p",[a._v("filter表示谓词条件的值并不会影响数据访问路径，只起到过滤的作用")])])}),[],!1,null,null,null);s.default=c.exports}}]);